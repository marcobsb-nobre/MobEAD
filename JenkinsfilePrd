pipeline {  
    environment {
      tagName = "marcos_nobre_unyleya"
      containerName = "aplicacao_ead"
    }
    agent any 
    stages { 
    //    stage('SonarQube analysis') {
    //         steps{
    //             script{
    //                 def scannerHome = tool 'sonarscan';
    //                 withSonarQubeEnv('sonarqube') {
    //                     sh "${tool("sonarscan")}/bin/sonar-scanner \
    //                         -Dsonar.projectKey=marcos_nobre_unyleya \
    //                         -Dsonar.projectName=marcos_nobre_unyleya"
    //                 }
    //             }
    //         }
    //     }
        stage('Build image') {
            steps{
                script {
                    dockerImage = docker.build teste
                }
            }
        }
        stage('Require approval') {
           input{
                message "Do you want to proceed for production deployment?"
           }
           steps {
                sh 'echo "Deploy into Prod"'

           }
        }
        stage('Deploy container') {
            steps {
               
                    sh  'docker run -d --name teste -p 8180:80 teste'
                
            }
        }
    } 
}